# frontend-tao / bem
...

## Установка
Установка пакета, как и любого другого, производится через npm

``` bash
npm install ssh+git://git@gitlab.s.intranet:frontend-tao/bem.git
```

## Состав пакета
Библиотека состоит из следующих компонентов:
* ```BEM.Block```      - абстрактный класс для описания поведения блока
* ```BEM.Collection``` - базовый класс коллекций блоков
* ```BEM.Registry```   - объект-хранилище для определенных bem-js блоков  
* ```BEM.Config```     - экземпляр конфига

## Декларация блока
JS-реализация блока описывает поведение определённого класса элементов веб-интерфейса. В конкретных интерфейсах каждый 
блок может быть представлен несколькими экземплярами. Экземпляр блока реализует функциональность своего класса и имеет 
собственное, независимое состояние. Экземпляры одного блока объединяются в коллекции ```BEM.Collection``` этого блока 

В терминах парадигмы объектно-ориентированного программирования:
* '''блок''' — класс;
* '''экземпляр блока''' — экземпляр класса.

Поведение блока описывается в JavaScript-файле блока (myblock.js).
В соответствии с ООП, вся функциональность блока реализуется модульно в методах класса блока. 
Данный класс должен расширять абстрактный класс ```BEM.Block``` 

Методы блока подразделяются на:
* статические методы и свойства.
* методы и свойства экземпляра блока;

### Cтатические методы

#### blockName
Свойство должно возвращать имя блока. Обязательно для заполнения.

#### live
Cвойство должно возвращать объект со списоком js-событий и их обработчиков, подписка на которые произодет при 
инициализации блока. В качестве обработчика могут выступать:
* '''строка'''   - в этом случае при наступлении события будет вызван одноименный метод у экземпляра класса
* '''callback''' - в этом случае при наступлении события будет вызван переданный callback

``` js
//...
static get live()
{
	return {
		'click': 'onClick',
	}
}
```

#### get events
Свойство должно возвращать объект со списком событий и их обработчиков. Структура возвращаемого объекта должна быть сделующей:
``` js
//...
static get events()
{
	return {
		// список обработчиков при изменении модификаторов блока
		'onMod': {
			// данный callback будет вызван каждый раз когда будет изменен модификатор modName не зависимо от его значения
			'modName': 'onModName',
			
			// если необходима подписка на изменения модификатора с определенным значением
		    'modName2': {
				'value1': 'onModNameValueOne',
				'value2': 'onModNameTwoOne',
		    }
		},
		
		// список обработчиков при изменении модификаторов у эл-ов блока
		'onElemMod': {
			// Ключ - имя эл-та. Значение - структура аналогичная onMod 
			'elemName': {
				'modName': 'onModName'
			}
		}
	}
}
```

#### get attrs
Свойство должно возвращать список аттрибутов которые будут установлены при инициализации блока.
``` js
//...
static get events()
{
	return {
		'attrName': 'attrValue',
	}
}
```

#### get forced
Если св-во имеет значение ```true``` инициализация блоков данного типа будет произведена при загрузке страницы (document.ready)
В противном случае, инициализация блока произойдет при возникновении какого-либо js события внутри блока. По умолчанию ```false```

#### get lazy
Св-во должно возвращать кол-во милисекунд на которое будет отложена инициализация блока. 
Например при значении св-ва ```1000``` в месте со свойством ```forced``` в значении ```true``` инициализация блока произойдет
через секунду после загрузки страницы. По умолчанию '''0'''

#### get cache
Если св-во возвращает ```true```, то при доступе к дочерним эл-ам все выборки будут сохранены в кеше.

#### create([tagName = 'div'])
Метод создает новый DOM элемент и инициализирует на нем экземпляр класса блока

#### getInstance(DomElement node)
Метод возвращает экземпляр класса блока для переданного DOM элемента

#### makeCollection()
Метод создает новую коллекцию блоков данного типа. Для переопределения базовой коллекции блока нужно переопределить 
данный метод и в нем вернуть экземпляр нужно коллекции

#### getCollection()
Метод возвращает коллекцию объектов-блоков на странице. Данная коллекция будет изменяться по мере инициализации новых 
блоков или их удалении

#### config()
Метод возвращает BEM.Config

#### register()
Метод регистрирует данный тип в реестре блоков. 
Должен обязательно быть вызван после определения класса.